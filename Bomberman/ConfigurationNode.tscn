[gd_scene load_steps=2 format=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

func _ready():
	UpdateMoveSet()
	
# player movement settings [playerID, up , down, left, right, placebomb ]
var P1 = ['P1',KEY_W,KEY_S,KEY_A,KEY_D,KEY_SPACE]
var P2 = ['P2',KEY_UP,KEY_DOWN,KEY_LEFT,KEY_RIGHT,KEY_ENTER]
var P3 = ['P3',KEY_T,KEY_G,KEY_F,KEY_H,KEY_Y]
var P4 = ['P4',KEY_I,KEY_K,KEY_J,KEY_L,KEY_O]
var PList = [P1,P2,P3,P4]

func setNewMoveSet( plist ):
	PList = plist
	UpdateMoveSet()

func UpdateMoveSet( ):
	
	for x in PList :
		InputMap.action_erase_events( x[0] + '_ui_left' );
		InputMap.action_erase_events( x[0] + '_ui_right' );
		InputMap.action_erase_events( x[0] + '_ui_up' );
		InputMap.action_erase_events( x[0] + '_ui_down' );
		InputMap.action_erase_events( x[0] + '_ui_select' );
		
	for x in PList:
		var UPevent = InputEventKey.new()
		UPevent.set_scancode( x[1] )
		InputMap.action_add_event( x[0]+'_ui_up',UPevent)
		
		var DOWNevent = InputEventKey.new()
		DOWNevent.set_scancode( x[2] )
		InputMap.action_add_event( x[0]+'_ui_down',DOWNevent)
		
		var LEFTevent = InputEventKey.new()
		LEFTevent.set_scancode( x[3] )
		InputMap.action_add_event( x[0]+'_ui_left',LEFTevent)
		
		var RIGHTevent = InputEventKey.new()
		RIGHTevent.set_scancode( x[4] )
		InputMap.action_add_event( x[0]+'_ui_right',RIGHTevent)
		
		var BOMBevent = InputEventKey.new()
		BOMBevent.set_scancode( x[5] )
		InputMap.action_add_event( x[0]+'_ui_select',BOMBevent)
		
		"

[node name="Node2D" type="Node2D"]
script = SubResource( 1 )

